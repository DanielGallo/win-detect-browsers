#!/usr/bin/env node

var argv = require('yargs')
  .boolean('lucky').alias('l', 'lucky')
  .boolean('verbose')
  .default({ lucky: false, verbose: false })
  .argv;

var detect = require('../')
  , start  = Date.now()

detect(argv._, argv, function(err, browsers){
  if (err) throw err

  var duration = Date.now()-start
  console.log('Found %d browsers in %dms\n', browsers.length, duration)

  var format = "%s %s%s\n  @ %s"
  browsers.forEach(function(b){
    if (argv.verbose) console.log(b)
    else {
      var channel = b.channel ? ' (' + b.channel + ')' : ''
      console.log(format, b.name, b.version || '', channel, b.path)
    }
  })
})
